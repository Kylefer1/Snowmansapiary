<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snowman’s Apiary</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html, body {
  margin: 0;
  padding: 0;
  background: radial-gradient(circle at top, #0b1d2e, #040b14);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: white;
  overflow: hidden;
}

/* Background blur */
.bg {
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg, #0d2238, #02070d);
  filter: blur(22px);
  transform: scale(1.1);
  z-index: 0;
}

/* Foreground card */
.card {
  position: relative;
  z-index: 3;
  max-width: 720px;
  margin: 70px auto;
  padding: 24px;
  border-radius: 18px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  backdrop-filter: blur(10px);
  text-align: center;
}

.card img {
  max-width: 100%;
  border-radius: 12px;
}

h1 {
  margin: 14px 0 6px;
  font-size: 40px;
}

p {
  opacity: 0.85;
  font-size: 18px;
}

.btn {
  display: inline-block;
  margin-top: 12px;
  padding: 12px 18px;
  border-radius: 12px;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.18);
  color: white;
  text-decoration: none;
  font-weight: 700;
}

/* Snow canvas */
canvas {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

/* Snow pile (wavy) */
#pile {
  position: fixed;
  bottom: 0;
  left: -10%;
  width: 120%;
  height: 0;
  background: #eef2f6;
  border-top-left-radius: 60% 40px;
  border-top-right-radius: 60% 40px;
  z-index: 4;
  transition: height 0.12s linear;
}

/* HUD */
.hud {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 5;
  font-size: 13px;
  padding: 8px 10px;
  border-radius: 12px;
  background: rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.15);
  backdrop-filter: blur(8px);
  min-width: 160px;
}

.hud div {
  display: flex;
  justify-content: space-between;
  margin-bottom: 4px;
}

/* Blizzard bar */
.bar {
  height: 6px;
  border-radius: 6px;
  background: rgba(255,255,255,0.15);
  overflow: hidden;
}

.bar span {
  display: block;
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #9fd7ff, #ffffff);
}

/* Game over overlay */
#overlay {
  position: fixed;
  inset: 0;
  background: rgba(5,10,18,0.75);
  z-index: 10;
  display: none;
  align-items: center;
  justify-content: center;
  text-align: center;
}

#overlay .box {
  background: rgba(255,255,255,0.08);
  border-radius: 18px;
  padding: 28px;
  border: 1px solid rgba(255,255,255,0.18);
  backdrop-filter: blur(12px);
}

/* Screen shake */
@keyframes shake {
  0% { transform: translate(0,0); }
  25% { transform: translate(-3px,2px); }
  50% { transform: translate(3px,-2px); }
  75% { transform: translate(-2px,-3px); }
  100% { transform: translate(0,0); }
}

body.blizzard {
  animation: shake 0.15s infinite;
}
</style>
</head>

<body>
<div class="bg"></div>

<canvas id="snow"></canvas>
<div id="pile"></div>

<div class="hud">
  <div><span>Score</span><span id="score">0</span></div>
  <div><span>High</span><span id="high">0</span></div>
  <div><span>Combo</span><span id="combo">x0</span></div>
  <div><span>Blizzard</span><span id="bstate">idle</span></div>
  <div class="bar"><span id="bbar"></span></div>
  <div style="opacity:.7">Tap pile to shovel ❄️</div>
</div>

<div class="card">
  <img src="logo.png" alt="Snowman’s Apiary">
  <h1>Snowman’s Apiary</h1>
  <p>Local honey & apiary goods.</p>
  <p><strong>Currently out of stock — expecting more honey by summer.</strong></p>
  <a class="btn" href="mailto:snowmansapiary@yahoo.com">Email Snowman’s Apiary</a>
</div>

<div id="overlay">
  <div class="box">
    <h2>You were buried</h2>
    <p>Sometimes the trick is knowing when not to push.</p>
    <p id="final"></p>
    <a class="btn" onclick="location.reload()">Try again</a>
  </div>
</div>

<script>
/* Canvas snow */
const canvas = document.getElementById('snow');
const ctx = canvas.getContext('2d');
function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
addEventListener('resize', resize);
resize();

const flakes = [];
for(let i=0;i<160;i++){
  flakes.push({
    x: Math.random()*innerWidth,
    y: Math.random()*innerHeight,
    r: Math.random()*2.5+1,
    v: Math.random()*0.6+0.3
  });
}

/* State */
let pile = 0;
let score = 0;
let combo = 0;
let high = localStorage.high || 0;

let blizzardMeter = 0;
let blizzard = false;
let blizzardTime = 0;

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const speed = blizzard ? 4.8 : 1;
  flakes.forEach(f=>{
    f.y += f.v * speed;
    if(f.y > innerHeight) f.y = -10;
    ctx.beginPath();
    ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    ctx.fillStyle = 'rgba(255,255,255,0.85)';
    ctx.fill();
  });

  pile += blizzard ? 2.2 : 0.38;

  if(!blizzard){
    blizzardMeter += 0.001;
    if(blizzardMeter >= 1){
      blizzard = true;
      blizzardTime = 0;
      document.body.classList.add('blizzard');
    }
  } else {
    blizzardTime += 0.016;
    if(blizzardTime > 14){
      blizzard = false;
      blizzardMeter = 0;
      document.body.classList.remove('blizzard');
    }
  }

  document.getElementById('pile').style.height = pile + 'px';
  document.getElementById('score').textContent = score;
  document.getElementById('combo').textContent = 'x' + combo;
  document.getElementById('high').textContent = high;
  document.getElementById('bstate').textContent = blizzard ? 'ACTIVE' : 'idle';
  document.getElementById('bbar').style.width = (blizzardMeter*100)+'%';

  if(pile > innerHeight){
    document.getElementById('overlay').style.display = 'flex';
    document.getElementById('final').textContent =
      `Final score: ${score}`;
    return;
  }

  requestAnimationFrame(loop);
}
loop();

/* Shovel — intentionally weak */
document.body.addEventListener('pointerdown', ()=>{
  let base = blizzard ? 3.1 : 6.2;
  let fatigue = blizzard ? Math.max(0.25, 1 - blizzardTime * 0.07) : 1;

  let removed = base * fatigue;
  pile = Math.max(0, pile - removed);

  combo++;
  score += combo;

  if(score > high){
    high = score;
    localStorage.high = high;
  }
});
</script>
</body>
</html>
